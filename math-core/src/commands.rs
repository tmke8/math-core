use mathml_renderer::ast::Node;
use mathml_renderer::attribute::{
    FracAttr, MathSpacing, MathVariant, OpAttr, RowAttr, Size, Style, TextTransform,
};
use mathml_renderer::symbol::{self, Rel};

use crate::predefined;
use crate::specifications::LaTeXUnit;
use crate::token::Token;

static COMMANDS: phf::Map<&'static str, Token> = phf::phf_map! {
    " " => Token::NonBreakingSpace,
    "!" => Token::Space(LaTeXUnit::Mu.length_with_unit(-3.0)),
    "#" => Token::Letter('#'),
    "$" => Token::Letter('$'),
    "%" => Token::Letter('%'),
    "&" => Token::OpAmpersand,
    "," => Token::Space(LaTeXUnit::Mu.length_with_unit(3.0)),
    ":" => Token::Space(LaTeXUnit::Mu.length_with_unit(4.0)),
    ";" => Token::Space(LaTeXUnit::Mu.length_with_unit(5.0)),
    ">" => Token::Space(LaTeXUnit::Mu.length_with_unit(4.0)),
    "\\" => Token::NewLine,
    "_" => Token::Letter('_'),
    "AA" => Token::Letter('Ã…'), // TODO: valid in text mode only
    "AE" => Token::Letter('Ã†'),
    "Alpha" => Token::UprightLetter('Î‘'),
    "And" => Token::OpAmpersand,
    "Bbbk" => Token::Letter('ð•œ'),
    "Beta" => Token::UprightLetter('Î’'),
    "Big" => Token::Big(Size::Scale2),
    "Bigg" => Token::Big(Size::Scale4),
    "Biggl" => Token::Big(Size::Scale4),
    "Biggr" => Token::Big(Size::Scale4),
    "Bigl" => Token::Big(Size::Scale2),
    "Bigr" => Token::Big(Size::Scale2),
    "Box" => Token::Letter('â—»'),
    "Bumpeq" => Token::Relation(symbol::GEOMETRICALLY_EQUIVALENT_TO),
    "Cap" => Token::Relation(symbol::DOUBLE_INTERSECTION),
    "Chi" => Token::UprightLetter('Î§'),
    "Colon" => Token::Relation(symbol::PROPORTION),
    "Cup" => Token::Relation(symbol::DOUBLE_UNION),
    "DH" => Token::Letter('Ã'),
    "Dagger" => Token::Letter('â€¡'),
    "Delta" => Token::UprightLetter('Î”'),
    "Diamond" => Token::Letter('â—Š'),
    "Doteq" => Token::Relation(symbol::GEOMETRICALLY_EQUAL_TO),
    "Downarrow" => Token::Delimiter(symbol::DOWNWARDS_DOUBLE_ARROW),
    "Epsilon" => Token::UprightLetter('Î•'),
    "Eta" => Token::UprightLetter('Î—'),
    "Finv" => Token::Letter('â„²'),
    "Game" => Token::Letter('â…'),
    "Gamma" => Token::UprightLetter('Î“'),
    "Im" => Token::Letter('â„‘'),
    "Iota" => Token::UprightLetter('Î™'),
    "Join" => Token::Relation(symbol::BOWTIE),
    "Kappa" => Token::UprightLetter('Îš'),
    "L" => Token::Letter('Å'),
    "Lambda" => Token::UprightLetter('Î›'),
    "Leftarrow" => Token::Relation(symbol::LEFTWARDS_DOUBLE_ARROW),
    "Leftrightarrow" => Token::Relation(symbol::LEFT_RIGHT_DOUBLE_ARROW),
    "Lleftarrow" => Token::Relation(symbol::LEFTWARDS_TRIPLE_ARROW),
    "Longleftarrow" => Token::Relation(symbol::LONG_LEFTWARDS_DOUBLE_ARROW),
    "Longleftrightarrow" => Token::Relation(symbol::LONG_LEFT_RIGHT_DOUBLE_ARROW),
    "Longrightarrow" => Token::Relation(symbol::LONG_RIGHTWARDS_DOUBLE_ARROW),
    "Lsh" => Token::Relation(symbol::UPWARDS_ARROW_WITH_TIP_LEFTWARDS),
    "Mu" => Token::UprightLetter('Îœ'),
    "NG" => Token::Letter('ÅŠ'),
    "Nu" => Token::UprightLetter('Î'),
    "O" => Token::Letter('Ã˜'),
    "OE" => Token::Letter('Å’'),
    "Omega" => Token::UprightLetter('Î©'),
    "Omicron" => Token::UprightLetter('ÎŸ'),
    "P" => Token::Letter('Â¶'),
    "Phi" => Token::UprightLetter('Î¦'),
    "Pi" => Token::UprightLetter('Î '),
    "Pr" => Token::Function("Pr"),
    "Psi" => Token::UprightLetter('Î¨'),
    "RR" => Token::CustomCmd(0, &Node::TextTransform {
        tf: MathVariant::Transform(TextTransform::DoubleStruck),
        content: &Node::SingleLetterIdent('R', false),
    }),
    "Re" => Token::Letter('â„œ'),
    "Rho" => Token::UprightLetter('Î¡'),
    "Rightarrow" => Token::Relation(symbol::RIGHTWARDS_DOUBLE_ARROW),
    "Rrightarrow" => Token::Relation(symbol::RIGHTWARDS_TRIPLE_ARROW),
    "Rsh" => Token::Relation(symbol::UPWARDS_ARROW_WITH_TIP_RIGHTWARDS),
    "S" => Token::Letter('Â§'),
    "Sigma" => Token::UprightLetter('Î£'),
    "Subset" => Token::Relation(symbol::DOUBLE_SUBSET),
    "Supset" => Token::Relation(symbol::DOUBLE_SUPERSET),
    "TH" => Token::Letter('Ãž'),
    "Tau" => Token::UprightLetter('Î¤'),
    "Theta" => Token::UprightLetter('Î˜'),
    "Uparrow" => Token::Delimiter(symbol::UPWARDS_DOUBLE_ARROW),
    "Updownarrow" => Token::Delimiter(symbol::UP_DOWN_DOUBLE_ARROW),
    "Upsilon" => Token::UprightLetter('Î¥'),
    "Vdash" => Token::Relation(symbol::FORCES),
    "Vert" => Token::Delimiter(symbol::DOUBLE_VERTICAL_LINE),
    "Vvdash" => Token::Relation(symbol::TRIPLE_VERTICAL_BAR_RIGHT_TURNSTILE),
    "Xi" => Token::UprightLetter('Îž'),
    "Yleft" => Token::Relation(symbol::LEFTWARDS_ARROW_TAIL),
    "Yright" => Token::Relation(symbol::RIGHTWARDS_ARROW_TAIL),
    "Zeta" => Token::UprightLetter('Î–'),
    "a" => Token::Letter('Ã¥'),
    "acute" => Token::OverUnder(symbol::ACUTE_ACCENT, true, None),
    "ae" => Token::Letter('Ã¦'),
    "aleph" => Token::Letter('â„µ'),
    "alpha" => Token::Letter('Î±'),
    "amalg" => Token::Relation(symbol::AMALGAMATION_OR_COPRODUCT),
    "angle" => Token::Letter(symbol::ANGLE),
    "approx" => Token::Relation(symbol::ALMOST_EQUAL_TO),
    "approxeq" => Token::Relation(symbol::ALMOST_EQUAL_OR_EQUAL_TO),
    "arccos" => Token::Function("arccos"),
    "arceq" => Token::Relation(symbol::CORRESPONDS_TO), // from "stix"
    "arcsin" => Token::Function("arcsin"),
    "arctan" => Token::Function("arctan"),
    "arg" => Token::Function("arg"),
    "ascnode" => Token::Letter('â˜Š'),
    "ast" => Token::Relation(symbol::ASTERISK_OPERATOR),
    "astrosun" => Token::Letter(symbol::SUN),
    "asymp" => Token::Relation(symbol::EQUIVALENT_TO),
    "awint" => Token::Integral(symbol::ANTICLOCKWISE_INTEGRATION),
    "backdprime" => Token::Relation(symbol::REVERSED_DOUBLE_PRIME),
    "backepsilon" => Token::Relation(symbol::SMALL_CONTAINS_AS_MEMBER),
    "backprime" => Token::Relation(symbol::REVERSED_PRIME),
    "backsim" => Token::Relation(symbol::REVERSED_TILDE),
    "backsimeq" => Token::Relation(symbol::REVERSED_TILDE_EQUALS),
    "backslash" => Token::Delimiter(symbol::REVERSE_SOLIDUS),
    "backtrprime" => Token::Relation(symbol::REVERSED_TRIPLE_PRIME),
    "bar" => Token::OverUnder(symbol::MACRON, true, Some(OpAttr::StretchyFalse)),
    "barwedge" => Token::Relation(symbol::NAND),
    "because" => Token::Relation(symbol::BECAUSE),
    "begin" => Token::Begin,
    "beta" => Token::Letter('Î²'),
    "beth" => Token::Letter('â„¶'),
    "between" => Token::Relation(symbol::BETWEEN),
    "big" => Token::Big(Size::Scale1),
    "bigcap" => Token::BigOp(symbol::N_ARY_INTERSECTION),
    "bigcirc" => Token::Letter(symbol::LARGE_CIRCLE),
    "bigcup" => Token::BigOp(symbol::N_ARY_UNION),
    "bigcupdot" => Token::BigOp(symbol::N_ARY_UNION_OPERATOR_WITH_DOT),
    "bigdoublevee" => Token::BigOp(symbol::TWO_LOGICAL_OR_OPERATOR),
    "bigdoublewedge" => Token::BigOp(symbol::TWO_LOGICAL_AND_OPERATOR),
    "bigg" => Token::Big(Size::Scale3),
    "biggl" => Token::Big(Size::Scale3),
    "biggr" => Token::Big(Size::Scale3),
    "bigl" => Token::Big(Size::Scale1),
    "bigodot" => Token::BigOp(symbol::N_ARY_CIRCLED_DOT_OPERATOR),
    "bigoplus" => Token::BigOp(symbol::N_ARY_CIRCLED_PLUS_OPERATOR),
    "bigotimes" => Token::BigOp(symbol::N_ARY_CIRCLED_TIMES_OPERATOR),
    "bigr" => Token::Big(Size::Scale1),
    "bigsqcap" => Token::BigOp(symbol::N_ARY_SQUARE_INTERSECTION_OPERATOR),
    "bigsqcup" => Token::BigOp(symbol::N_ARY_SQUARE_UNION_OPERATOR),
    "bigstar" => Token::Letter(symbol::BLACK_STAR),
    "bigtimes" => Token::BigOp(symbol::N_ARY_TIMES_OPERATOR),
    "bigtriangledown" => Token::Letter(symbol::WHITE_DOWN_POINTING_TRIANGLE),
    "bigtriangleup" => Token::Letter(symbol::WHITE_UP_POINTING_TRIANGLE),
    "biguplus" => Token::BigOp(symbol::N_ARY_UNION_OPERATOR_WITH_PLUS),
    "bigvee" => Token::BigOp(symbol::N_ARY_LOGICAL_OR),
    "bigwedge" => Token::BigOp(symbol::N_ARY_LOGICAL_AND),
    "binom" => Token::Binom(None),
    "blacklozenge" => Token::Letter(symbol::BLACK_LOZENGE),
    "blacksquare" => Token::Letter(symbol::BLACK_SQUARE),
    "blacktriangle" => Token::Letter(symbol::BLACK_UP_POINTING_TRIANGLE),
    "blacktriangledown" => Token::Letter(symbol::BLACK_DOWN_POINTING_TRIANGLE),
    "blacktriangleleft" => Token::Letter(symbol::BLACK_LEFT_POINTING_TRIANGLE),
    "blacktriangleright" => Token::Letter(symbol::BLACK_RIGHT_POINTING_TRIANGLE),
    "bm" => Token::Transform(MathVariant::Transform(TextTransform::BoldItalic)),
    "bmod" => Token::CustomCmd(0, &Node::Row {
        nodes: &[
            &Node::Space(LaTeXUnit::Mu.length_with_unit(4.0)),
            &Node::Text("mod"),
            &Node::Space(LaTeXUnit::Mu.length_with_unit(4.0)),
        ],
        attr: RowAttr::None
    }),
    "boldsymbol" => Token::Transform(MathVariant::Transform(TextTransform::BoldItalic)),
    "bot" => Token::Letter(symbol::UP_TACK),
    "botdoteq" => Token::Relation(symbol::EQUALS_SIGN_WITH_DOT_BELOW),
    "boxbox" => Token::Relation(symbol::SQUARED_SQUARE),
    "boxbslash" => Token::Relation(symbol::SQUARED_FALLING_DIAGONAL_SLASH),
    "boxdot" => Token::Relation(symbol::SQUARED_DOT_OPERATOR),
    "boxminus" => Token::Relation(symbol::SQUARED_MINUS),
    "boxplus" => Token::Relation(symbol::SQUARED_PLUS),
    "boxslash" => Token::Relation(symbol::SQUARED_RISING_DIAGONAL_SLASH),
    "boxtimes" => Token::Relation(symbol::SQUARED_TIMES),
    "breve" => Token::OverUnder(symbol::BREVE, true, None),
    "bullet" => Token::Relation(symbol::BULLET_OPERATOR),
    "bumpeq" => Token::Relation(symbol::DIFFERENCE_BETWEEN),
    "cap" => Token::Relation(symbol::INTERSECTION),
    "cdot" => Token::BinaryOp(symbol::MIDDLE_DOT),
    "cdots" => Token::CustomCmd(0, &Node::Row {
        nodes: &[
            &Node::Operator(symbol::MIDDLE_DOT.as_op(), None),
            &Node::OperatorWithSpacing {
                op:symbol::MIDDLE_DOT.as_op(),
                left: Some(MathSpacing::Zero),
                right: Some(MathSpacing::Zero),
            },
            &Node::Operator(symbol::MIDDLE_DOT.as_op(), None),
        ],
        attr: RowAttr::None
    }),
    "centerdot" => Token::Relation(symbol::BULLET_OPERATOR),
    "cfrac" => Token::Frac(Some(FracAttr::CFracStyle)),
    "check" => Token::OverUnder(symbol::CARON, true, Some(OpAttr::StretchyFalse)),
    "checkmark" => Token::Letter('âœ“'),
    "chi" => Token::Letter('Ï‡'),
    "circ" => Token::Relation(symbol::RING_OPERATOR),
    "circeq" => Token::Relation(symbol::RING_EQUAL_TO),
    "circlearrowleft" => Token::Relation(symbol::ANTICLOCKWISE_OPEN_CIRCLE_ARROW),
    "circlearrowright" => Token::Relation(symbol::CLOCKWISE_OPEN_CIRCLE_ARROW),
    "circledR" => Token::Letter(symbol::CIRCLED_LATIN_CAPITAL_LETTER_R),
    "circledS" => Token::Letter(symbol::CIRCLED_LATIN_CAPITAL_LETTER_S),
    "circledast" => Token::Relation(symbol::CIRCLED_ASTERISK_OPERATOR),
    "circledcirc" => Token::Relation(symbol::CIRCLED_RING_OPERATOR),
    "circleddash" => Token::Relation(symbol::CIRCLED_DASH),
    "cirfnint" => Token::Integral(symbol::CIRCULATION_FUNCTION),
    "clubsuit" => Token::Letter(symbol::BLACK_CLUB_SUIT),
    "colon" => Token::Letter(symbol::COLON.as_op().as_char()),
    "coloneq" => Token::Relation(symbol::COLON_EQUALS),
    "coloneqq" => Token::Relation(symbol::COLON_EQUALS),
    "color" => Token::Color,
    "complement" => Token::Letter(symbol::COMPLEMENT),
    "cong" => Token::Relation(symbol::APPROXIMATELY_EQUAL_TO),
    "coprod" => Token::BigOp(symbol::N_ARY_COPRODUCT),
    "copyright" => Token::Letter('Â©'),
    "cos" => Token::Function("cos"),
    "cosh" => Token::Function("cosh"),
    "cot" => Token::Function("cot"),
    "coth" => Token::Function("coth"),
    "csc" => Token::Function("csc"),
    "cup" => Token::Relation(symbol::UNION),
    "curlyeqprec" => Token::Relation(symbol::EQUAL_TO_OR_PRECEDES),
    "curlyeqsucc" => Token::Relation(symbol::EQUAL_TO_OR_SUCCEEDS),
    "curlyvee" => Token::Relation(symbol::CURLY_LOGICAL_OR),
    "curlywedge" => Token::Relation(symbol::CURLY_LOGICAL_AND),
    "curvearrowleft" => Token::Relation(symbol::ANTICLOCKWISE_TOP_SEMICIRCLE_ARROW),
    "curvearrowright" => Token::Relation(symbol::CLOCKWISE_TOP_SEMICIRCLE_ARROW),
    "d" => Token::CustomCmd(0, &Node::TextTransform {
        tf: MathVariant::Normal,
        content: &Node::SingleLetterIdent('d', false),
    }),
    "dag" => Token::Letter(symbol::DAGGER),
    "dagger" => Token::Letter(symbol::DAGGER),
    "daleth" => Token::Letter('â„¸'),
    "dashcolon" => Token::Relation(symbol::EXCESS),
    "dashv" => Token::Relation(symbol::LEFT_TACK),
    "dbinom" => Token::Binom(Some(FracAttr::DisplayStyleTrue)),
    "dblcolon" => Token::Relation(symbol::PROPORTION),
    "ddag" => Token::Letter(symbol::DOUBLE_DAGGER),
    "ddagger" => Token::Letter(symbol::DOUBLE_DAGGER),
    "ddot" => Token::OverUnder(symbol::DIAERESIS, true, None),
    "ddots" => Token::Relation(symbol::DOWN_RIGHT_DIAGONAL_ELLIPSIS),
    "deg" => Token::Function("deg"),
    "delta" => Token::Letter('Î´'),
    "det" => Token::Function("det"),
    "dfrac" => Token::Frac(Some(FracAttr::DisplayStyleTrue)),
    "dh" => Token::Letter('Ã°'),
    "diamond" => Token::Relation(symbol::DIAMOND_OPERATOR),
    "diamondsuit" => Token::Letter(symbol::WHITE_DIAMOND_SUIT),
    "digamma" => Token::Letter('Ï'),
    "dim" => Token::Function("dim"),
    "displaystyle" => Token::Style(Style::DisplayStyle),
    "div" => Token::BinaryOp(symbol::DIVISION_SIGN),
    "divideontimes" => Token::Relation(symbol::DIVISION_TIMES),
    "dj" => Token::Letter('Ä‘'),
    "dot" => Token::OverUnder(symbol::DOT_ABOVE, true, None),
    "doteq" => Token::Relation(symbol::APPROACHES_THE_LIMIT),
    "doteqdot" => Token::Relation(symbol::GEOMETRICALLY_EQUAL_TO),
    "dotplus" => Token::BinaryOp(symbol::DOT_PLUS),
    "dots" => Token::Relation(symbol::HORIZONTAL_ELLIPSIS),
    "dotsminusdots" => Token::Relation(symbol::GEOMETRIC_PROPORTION),
    "doublebarwedge" => Token::Relation(symbol::LOGICAL_AND_WITH_DOUBLE_OVERBAR),
    "downarrow" => Token::Delimiter(symbol::DOWNWARDS_ARROW),
    "downdownarrows" => Token::Relation(symbol::DOWNWARDS_PAIRED_ARROWS),
    "downharpoonleft" => Token::Relation(symbol::DOWNWARDS_HARPOON_WITH_BARB_LEFTWARDS),
    "downharpoonright" => Token::Relation(symbol::DOWNWARDS_HARPOON_WITH_BARB_RIGHTWARDS),
    "dprime" => Token::Relation(symbol::DOUBLE_PRIME),
    "earth" => Token::Letter(symbol::EARTH),
    "ell" => Token::Letter('â„“'),
    "empty" => Token::Function("âˆ…ï¸€"), // these are two unicode characters
    "emptyset" => Token::Function("âˆ…ï¸€"), // these are two unicode characters
    "end" => Token::End,
    "epsilon" => Token::Letter('Ïµ'),
    "eqcirc" => Token::Relation(symbol::RING_IN_EQUAL_TO),
    "eqcolon" => Token::Relation(symbol::EQUALS_COLON),
    "eqqcolon" => Token::Relation(symbol::EQUALS_COLON),
    "eqdef" => Token::Relation(symbol::EQUAL_TO_BY_DEFINITION), // from "stix"
    "eqsim" => Token::Relation(symbol::MINUS_TILDE),
    "eqslantgtr" => Token::Relation(symbol::SLANTED_EQUAL_TO_OR_GREATER_THAN),
    "eqslantless" => Token::Relation(symbol::SLANTED_EQUAL_TO_OR_LESS_THAN),
    "equiv" => Token::Relation(symbol::IDENTICAL_TO),
    "erf" => Token::Function("erf"),
    "erfc" => Token::Function("erfc"),
    "eta" => Token::Letter('Î·'),
    "eth" => Token::Letter('Ã°'),
    "euro" => Token::Letter('â‚¬'),
    "exists" => Token::Relation(symbol::THERE_EXISTS),
    "exp" => Token::Function("exp"),
    "fallingdotseq" => Token::Relation(symbol::APPROXIMATELY_EQUAL_TO_OR_THE_IMAGE_OF),
    "fcmp" => Token::Relation(symbol::Z_NOTATION_SCHEMA_COMPOSITION),
    "fint" => Token::Integral(symbol::INTEGRAL_AVERAGE_WITH_SLASH),
    "flat" => Token::Letter('â™­'),
    "forall" => Token::Relation(symbol::FOR_ALL),
    "frac" => Token::Frac(None),
    "frown" => Token::Relation(symbol::FROWN),
    "gamma" => Token::Letter('Î³'),
    "gcd" => Token::Function("gcd"),
    "ge" => Token::Relation(symbol::GREATER_THAN_OR_EQUAL_TO),
    "genfrac" => Token::Genfrac,
    "geq" => Token::Relation(symbol::GREATER_THAN_OR_EQUAL_TO),
    "geqq" => Token::Relation(symbol::GREATER_THAN_OVER_EQUAL_TO),
    "geqslant" => Token::Relation(symbol::GREATER_THAN_OR_SLANTED_EQUAL_TO),
    "gets" => Token::Relation(symbol::LEFTWARDS_ARROW),
    "gg" => Token::Relation(symbol::MUCH_GREATER_THAN),
    "gimel" => Token::Letter('â„·'),
    "gnapprox" => Token::Relation(symbol::GREATER_THAN_AND_NOT_APPROXIMATE),
    "gneq" => Token::Relation(symbol::GREATER_THAN_AND_SINGLE_LINE_NOT_EQUAL_TO),
    "gneqq" => Token::Relation(symbol::GREATER_THAN_BUT_NOT_EQUAL_TO),
    "gnsim" => Token::Relation(symbol::GREATER_THAN_BUT_NOT_EQUIVALENT_TO),
    "grave" => Token::OverUnder(symbol::GRAVE_ACCENT, true, None),
    "gt" => Token::OpGreaterThan,
    "gtrapprox" => Token::Relation(symbol::GREATER_THAN_OR_APPROXIMATE),
    "gtreqless" => Token::Relation(symbol::GREATER_THAN_EQUAL_TO_OR_LESS_THAN),
    "gtreqqless" => Token::Relation(symbol::GREATER_THAN_ABOVE_DOUBLE_LINE_EQUAL_ABOVE_LESS_THAN),
    "gtrless" => Token::Relation(symbol::GREATER_THAN_OR_LESS_THAN),
    "gtrsim" => Token::Relation(symbol::GREATER_THAN_OR_EQUIVALENT_TO),
    "hat" => Token::OverUnder(symbol::CIRCUMFLEX_ACCENT, true, Some(OpAttr::StretchyFalse)),
    "hbar" => Token::Letter('â„'),
    "heartsuit" => Token::Letter(symbol::WHITE_HEART_SUIT),
    "hom" => Token::Function("hom"),
    "hookleftarrow" => Token::Relation(symbol::LEFTWARDS_ARROW_WITH_HOOK),
    "hookrightarrow" => Token::Relation(symbol::RIGHTWARDS_ARROW_WITH_HOOK),
    "hslash" => Token::Letter('â„'),
    "hspace" => Token::CustomSpace,
    "iff" => Token::Relation(symbol::LONG_LEFT_RIGHT_DOUBLE_ARROW),
    "iiiint" => Token::Integral(symbol::QUADRUPLE_INTEGRAL_OPERATOR),
    "iiint" => Token::Integral(symbol::TRIPLE_INTEGRAL),
    "iint" => Token::Integral(symbol::DOUBLE_INTEGRAL),
    "imath" => Token::Letter('Ä±'),
    "impliedby" => Token::Relation(symbol::LONG_LEFTWARDS_DOUBLE_ARROW),
    "implies" => Token::Relation(symbol::LONG_RIGHTWARDS_DOUBLE_ARROW),
    "in" => Token::Relation(symbol::ELEMENT_OF),
    "inf" => Token::Lim("inf"),
    "infty" => Token::Letter(symbol::INFINITY),
    "int" => Token::Integral(symbol::INTEGRAL),
    "intBar" => Token::Integral(symbol::INTEGRAL_WITH_DOUBLE_STROKE),
    "intbar" => Token::Integral(symbol::FINITE_PARTL_INTEGRAL),
    "intclockwise" => Token::Integral(symbol::CLOCKWISE_INTEGRAL),
    "intercal" => Token::Relation(symbol::INTERCALATE),
    "iota" => Token::Letter('Î¹'),
    "jmath" => Token::Letter('È·'),
    "jupiter" => Token::Letter(symbol::JUPITER),
    "kappa" => Token::Letter('Îº'),
    "ker" => Token::Function("ker"),
    "kernelcontraction" => Token::Relation(symbol::HOMOTHETIC),
    "l" => Token::Letter('Å‚'),
    "lBrace" => Token::Delimiter(symbol::LEFT_WHITE_CURLY_BRACKET),
    "lVert" => Token::Delimiter(symbol::DOUBLE_VERTICAL_LINE),
    "lambda" => Token::Letter('Î»'),
    "land" => Token::Relation(symbol::LOGICAL_AND),
    "langle" => Token::Delimiter(symbol::MATHEMATICAL_LEFT_ANGLE_BRACKET),
    "lbrace" => Token::Delimiter(symbol::LEFT_CURLY_BRACKET),
    "lbrack" => Token::Delimiter(symbol::LEFT_SQUARE_BRACKET),
    "lceil" => Token::Delimiter(symbol::LEFT_CEILING),
    "ldots" => Token::Relation(symbol::HORIZONTAL_ELLIPSIS),
    "le" => Token::Relation(symbol::LESS_THAN_OR_EQUAL_TO),
    "left" => Token::Left,
    "leftarrow" => Token::Relation(symbol::LEFTWARDS_ARROW),
    "leftarrowtail" => Token::Relation(symbol::LEFTWARDS_ARROW_WITH_TAIL),
    "leftharpoondown" => Token::Relation(symbol::LEFTWARDS_HARPOON_WITH_BARB_DOWNWARDS),
    "leftharpoonup" => Token::Relation(symbol::LEFTWARDS_HARPOON_WITH_BARB_UPWARDS),
    "leftleftarrows" => Token::Relation(symbol::LEFTWARDS_PAIRED_ARROWS),
    "leftrightarrow" => Token::Relation(symbol::LEFT_RIGHT_ARROW),
    "leftrightarrows" => Token::Relation(symbol::LEFTWARDS_ARROW_OVER_RIGHTWARDS_ARROW),
    "leftrightharpoons" => Token::Relation(symbol::LEFTWARDS_HARPOON_OVER_RIGHTWARDS_HARPOON),
    "leftrightsquigarrow" => Token::Relation(symbol::LEFT_RIGHT_WAVE_ARROW),
    "leftthreetimes" => Token::Relation(symbol::LEFT_SEMIDIRECT_PRODUCT),
    "leq" => Token::Relation(symbol::LESS_THAN_OR_EQUAL_TO),
    "leqq" => Token::Relation(symbol::LESS_THAN_OVER_EQUAL_TO),
    "leqslant" => Token::Relation(symbol::LESS_THAN_OR_SLANTED_EQUAL_TO),
    "lessapprox" => Token::Relation(symbol::LESS_THAN_OR_APPROXIMATE),
    "lessdot" => Token::Relation(symbol::LESS_THAN_WITH_DOT),
    "lesseqgtr" => Token::Relation(symbol::LESS_THAN_EQUAL_TO_OR_GREATER_THAN),
    "lesseqqgtr" => Token::Relation(symbol::LESS_THAN_ABOVE_DOUBLE_LINE_EQUAL_ABOVE_GREATER_THAN),
    "lessgtr" => Token::Relation(symbol::LESS_THAN_OR_GREATER_THAN),
    "lesssim" => Token::Relation(symbol::LESS_THAN_OR_EQUIVALENT_TO),
    "lfloor" => Token::Delimiter(symbol::LEFT_FLOOR),
    "lg" => Token::Function("lg"),
    "lgroup" => Token::Delimiter(symbol::MATHEMATICAL_LEFT_FLATTENED_PARENTHESIS),
    "lhd" => Token::Relation(symbol::NORMAL_SUBGROUP_OF),
    "lightning" => Token::Relation(symbol::DOWNWARDS_ZIGZAG_ARROW),
    "lim" => Token::Lim("lim"),
    "liminf" => Token::Lim("lim inf"),
    "limits" => Token::Limits,
    "limsup" => Token::Lim("lim sup"),
    "ll" => Token::Relation(symbol::MUCH_LESS_THAN),
    "llangle" => Token::Delimiter(symbol::Z_NOTATION_LEFT_BINDING_BRACKET),
    "llbracket" => Token::Delimiter(symbol::MATHEMATICAL_LEFT_WHITE_SQUARE_BRACKET),
    "llcorner" => Token::Letter(symbol::BOTTOM_LEFT_CORNER),
    "lll" => Token::Relation(symbol::VERY_MUCH_LESS_THAN),
    "llparenthesis" => Token::Delimiter(symbol::Z_NOTATION_LEFT_IMAGE_BRACKET),
    "ln" => Token::Function("ln"),
    "lnapprox" => Token::Relation(symbol::LESS_THAN_AND_NOT_APPROXIMATE),
    "lneq" => Token::Relation(symbol::LESS_THAN_AND_SINGLE_LINE_NOT_EQUAL_TO),
    "lneqq" => Token::Relation(symbol::LESS_THAN_BUT_NOT_EQUAL_TO),
    "lnot" => Token::Relation(symbol::NOT_SIGN),
    "lnsim" => Token::Relation(symbol::LESS_THAN_BUT_NOT_EQUIVALENT_TO),
    "log" => Token::Function("log"),
    "longleftarrow" => Token::Relation(symbol::LONG_LEFTWARDS_ARROW),
    "longleftrightarrow" => Token::Relation(symbol::LONG_LEFT_RIGHT_ARROW),
    "longmapsto" => Token::Relation(symbol::LONG_RIGHTWARDS_ARROW_FROM_BAR),
    "longrightarrow" => Token::Relation(symbol::LONG_RIGHTWARDS_ARROW),
    "looparrowleft" => Token::Relation(symbol::LEFTWARDS_ARROW_WITH_LOOP),
    "looparrowright" => Token::Relation(symbol::RIGHTWARDS_ARROW_WITH_LOOP),
    "lor" => Token::Relation(symbol::LOGICAL_OR),
    "lozenge" => Token::Letter(symbol::LOZENGE),
    "lrcorner" => Token::Letter(symbol::BOTTOM_RIGHT_CORNER),
    "lt" => Token::OpLessThan,
    "ltimes" => Token::Relation(symbol::LEFT_NORMAL_FACTOR_SEMIDIRECT_PRODUCT),
    "lvert" => Token::Delimiter(symbol::VERTICAL_LINE),
    "maltese" => Token::Letter('âœ '),
    "mapsto" => Token::Relation(symbol::RIGHTWARDS_ARROW_FROM_BAR),
    "mars" => Token::Letter(symbol::MALE_SIGN),
    "mathbb" => Token::Transform(MathVariant::Transform(TextTransform::DoubleStruck)),
    "mathbf" => Token::Transform(MathVariant::Transform(TextTransform::Bold)),
    "mathcal" => Token::Transform(MathVariant::Transform(TextTransform::ScriptChancery)),
    "mathfrak" => Token::Transform(MathVariant::Transform(TextTransform::Fraktur)),
    "mathit" => Token::Transform(MathVariant::Transform(TextTransform::Italic)),
    "mathrm" => Token::Transform(MathVariant::Normal),
    "mathscr" => Token::Transform(MathVariant::Transform(TextTransform::ScriptRoundhand)),
    "mathsf" => Token::Transform(MathVariant::Transform(TextTransform::SansSerif)),
    "mathstrut" => Token::HardcodedMathML(r#"<mpadded width="0" style="visibility:hidden"><mo stretchy="false">(</mo></mpadded>"#),
    "mathtt" => Token::Transform(MathVariant::Transform(TextTransform::Monospace)),
    "max" => Token::Lim("max"),
    "measeq" => Token::Relation(symbol::MEASURED_BY), // from "stix"
    "measuredangle" => Token::Letter(symbol::MEASURED_ANGLE),
    "mercury" => Token::Letter(symbol::MERCURY),
    "mho" => Token::Letter('â„§'),
    "mid" => Token::Relation(symbol::DIVIDES),
    "middle" => Token::Middle,
    "min" => Token::Lim("min"),
    "mod" => Token::CustomCmd(1, &predefined::MOD),
    "models" => Token::Relation(symbol::TRUE),
    "mp" => Token::BinaryOp(symbol::MINUS_OR_PLUS_SIGN),
    "mspace" => Token::CustomSpace,
    "mu" => Token::Letter('Î¼'),
    "multimap" => Token::Relation(symbol::MULTIMAP),
    "nLeftarrow" => Token::Relation(symbol::LEFTWARDS_DOUBLE_ARROW_WITH_STROKE),
    "nLeftrightarrow" => Token::Relation(symbol::LEFT_RIGHT_DOUBLE_ARROW_WITH_STROKE),
    "nRightarrow" => Token::Relation(symbol::RIGHTWARDS_DOUBLE_ARROW_WITH_STROKE),
    "nabla" => Token::UprightLetter(symbol::NABLA),
    "natural" => Token::Letter('â™®'),
    "ne" => Token::Relation(symbol::NOT_EQUAL_TO),
    "nearrow" => Token::Relation(symbol::NORTH_EAST_ARROW),
    "neg" => Token::Relation(symbol::NOT_SIGN),
    "neptune" => Token::Letter(symbol::NEPTUNE),
    "neq" => Token::Relation(symbol::NOT_EQUAL_TO),
    "nequiv" => Token::Relation(symbol::NOT_IDENTICAL_TO),
    "nexists" => Token::Relation(symbol::THERE_DOES_NOT_EXIST),
    "ng" => Token::Letter('Å‹'),
    "ngeq" => Token::Relation(symbol::NEITHER_GREATER_THAN_NOR_EQUAL_TO),
    "ngtr" => Token::Relation(symbol::NOT_GREATER_THAN),
    "ngtrless" => Token::Relation(symbol::NEITHER_GREATER_THAN_NOR_LESS_THAN),
    "ngtrsim" => Token::Relation(symbol::NEITHER_GREATER_THAN_NOR_EQUIVALENT_TO),
    "ni" => Token::Relation(symbol::CONTAINS_AS_MEMBER),
    "nleftarrow" => Token::Relation(symbol::LEFTWARDS_ARROW_WITH_STROKE),
    "nleftrightarrow" => Token::Relation(symbol::LEFT_RIGHT_ARROW_WITH_STROKE),
    "nleq" => Token::Relation(symbol::NEITHER_LESS_THAN_NOR_EQUAL_TO),
    "nless" => Token::Relation(symbol::NOT_LESS_THAN),
    "nlessgt" => Token::Relation(symbol::NEITHER_LESS_THAN_NOR_GREATER_THAN),
    "nlesssim" => Token::Relation(symbol::NEITHER_LESS_THAN_NOR_EQUIVALENT_TO),
    "nmid" => Token::Relation(symbol::DOES_NOT_DIVIDE),
    "not" => Token::Not,
    "notin" => Token::Relation(symbol::NOT_AN_ELEMENT_OF),
    "nparallel" => Token::Relation(symbol::NOT_PARALLEL_TO),
    "nprec" => Token::Relation(symbol::DOES_NOT_PRECEDE),
    "npreceq" => Token::Relation(symbol::DOES_NOT_PRECEDE_OR_EQUAL),
    "nrightarrow" => Token::Relation(symbol::RIGHTWARDS_ARROW_WITH_STROKE),
    "nsim" => Token::Relation(symbol::NOT_TILDE),
    "nsubset" => Token::Relation(symbol::NOT_A_SUBSET_OF),
    "nsubseteq" => Token::Relation(symbol::NEITHER_A_SUBSET_OF_NOR_EQUAL_TO),
    "nsucc" => Token::Relation(symbol::DOES_NOT_SUCCEED),
    "nsucceq" => Token::Relation(symbol::DOES_NOT_SUCCEED_OR_EQUAL),
    "nsupset" => Token::Relation(symbol::NOT_A_SUPERSET_OF),
    "nsupseteq" => Token::Relation(symbol::NEITHER_A_SUPERSET_OF_NOR_EQUAL_TO),
    "nu" => Token::Letter('Î½'),
    "nVDash" => Token::Relation(symbol::NEGATED_DOUBLE_VERTICAL_BAR_DOUBLE_RIGHT_TURNSTILE),
    "nVdash" => Token::Relation(symbol::DOES_NOT_FORCE),
    "nvDash" => Token::Relation(symbol::NOT_TRUE),
    "nvdash" => Token::Relation(symbol::DOES_NOT_PROVE),
    "nwarrow" => Token::Relation(symbol::NORTH_WEST_ARROW),
    "o" => Token::Letter('Ã¸'),
    "odot" => Token::Relation(symbol::CIRCLED_DOT_OPERATOR),
    "odv" => Token::CustomCmd(2, &predefined::ODV),
    "oe" => Token::Letter('Å“'),
    "oiiint" => Token::Integral(symbol::VOLUME_INTEGRAL),
    "oiint" => Token::Integral(symbol::SURFACE_INTEGRAL),
    "oint" => Token::Integral(symbol::CONTOUR_INTEGRAL),
    "ointctrclockwise" => Token::Integral(symbol::ANTICLOCKWISE_CONTOUR_INTEGRAL),
    "omega" => Token::Letter('Ï‰'),
    "omicron" => Token::Letter('Î¿'),
    "ominus" => Token::Relation(symbol::CIRCLED_MINUS),
    "operatorname" => Token::OperatorName,
    "oplus" => Token::Relation(symbol::CIRCLED_PLUS),
    "oslash" => Token::Relation(symbol::CIRCLED_DIVISION_SLASH),
    "otimes" => Token::Relation(symbol::CIRCLED_TIMES),
    "overbrace" => Token::OverUnderBrace(symbol::TOP_CURLY_BRACKET, true),
    "overbracket" => Token::OverUnderBrace(symbol::TOP_SQUARE_BRACKET, true),
    "overleftarrow" => Token::OverUnder(symbol::LEFTWARDS_ARROW.as_op(), true, None),
    "overline" => Token::OverUnder(symbol::OVERLINE.as_op(), true, None),
    "overparen" => Token::OverUnderBrace(symbol::TOP_PARENTHESIS, true),
    "overrightarrow" => Token::OverUnder(symbol::RIGHTWARDS_ARROW.as_op(), true, None),
    "overset" => Token::Overset,
    "parallel" => Token::Relation(symbol::PARALLEL_TO),
    "partial" => Token::Letter(symbol::PARTIAL_DIFFERENTIAL),
    "perp" => Token::Relation(symbol::PERPENDICULAR),
    "phi" => Token::Letter('Ï•'),
    "pi" => Token::Letter('Ï€'),
    "pitchfork" => Token::Relation(symbol::PITCHFORK),
    "pm" => Token::BinaryOp(symbol::PLUS_MINUS_SIGN),
    "pmod" => Token::CustomCmd(1, &predefined::PMOD),
    "pounds" => Token::Letter('Â£'),
    "prec" => Token::Relation(symbol::PRECEDES),
    "precapprox" => Token::Relation(symbol::PRECEDES_ABOVE_ALMOST_EQUAL_TO),
    "preccurlyeq" => Token::Relation(symbol::PRECEDES_OR_EQUAL_TO),
    "preceq" => Token::Relation(symbol::PRECEDES_ABOVE_SINGLE_LINE_EQUALS_SIGN),
    "precnapprox" => Token::Relation(symbol::PRECEDES_ABOVE_NOT_ALMOST_EQUAL_TO),
    "precneqq" => Token::Relation(symbol::PRECEDES_ABOVE_NOT_EQUAL_TO),
    "precnsim" => Token::Relation(symbol::PRECEDES_BUT_NOT_EQUIVALENT_TO),
    "precsim" => Token::Relation(symbol::PRECEDES_OR_EQUIVALENT_TO),
    "prime" => Token::Relation(symbol::PRIME),
    "prod" => Token::BigOp(symbol::N_ARY_PRODUCT),
    "propto" => Token::Relation(symbol::PROPORTIONAL_TO),
    "psi" => Token::Letter('Ïˆ'),
    "qprime" => Token::Relation(symbol::QUADRUPLE_PRIME),
    "qquad" => Token::Space(LaTeXUnit::Em.length_with_unit(2.0)),
    "quad" => Token::Space(LaTeXUnit::Em.length_with_unit(1.0)),
    "questeq" => Token::Relation(symbol::QUESTIONED_EQUAL_TO), // from "stix"
    "rBrace" => Token::Delimiter(symbol::RIGHT_WHITE_CURLY_BRACKET),
    "rVert" => Token::Delimiter(symbol::DOUBLE_VERTICAL_LINE),
    "rangle" => Token::Delimiter(symbol::MATHEMATICAL_RIGHT_ANGLE_BRACKET),
    "rbrace" => Token::Delimiter(symbol::RIGHT_CURLY_BRACKET),
    "rbrack" => Token::Delimiter(symbol::RIGHT_SQUARE_BRACKET),
    "rceil" => Token::Delimiter(symbol::RIGHT_CEILING),
    "rfloor" => Token::Delimiter(symbol::RIGHT_FLOOR),
    "rgroup" => Token::Delimiter(symbol::MATHEMATICAL_RIGHT_FLATTENED_PARENTHESIS),
    "rhd" => Token::Relation(symbol::CONTAINS_AS_NORMAL_SUBGROUP),
    "rho" => Token::Letter('Ï'),
    "right" => Token::Right,
    "rightarrow" => Token::Relation(symbol::RIGHTWARDS_ARROW),
    "rightarrowtail" => Token::Relation(symbol::RIGHTWARDS_ARROW_WITH_TAIL),
    "rightharpoondown" => Token::Relation(symbol::RIGHTWARDS_HARPOON_WITH_BARB_DOWNWARDS),
    "rightharpoonup" => Token::Relation(symbol::RIGHTWARDS_HARPOON_WITH_BARB_UPWARDS),
    "rightleftarrows" => Token::Relation(symbol::RIGHTWARDS_ARROW_OVER_LEFTWARDS_ARROW),
    "rightleftharpoons" => Token::Relation(symbol::RIGHTWARDS_HARPOON_OVER_LEFTWARDS_HARPOON),
    "rightrightarrows" => Token::Relation(symbol::RIGHTWARDS_PAIRED_ARROWS),
    "rightsquigarrow" => Token::Relation(symbol::RIGHTWARDS_SQUIGGLE_ARROW),
    "rightthreetimes" => Token::Relation(symbol::RIGHT_SEMIDIRECT_PRODUCT),
    "risingdotseq" => Token::Relation(symbol::IMAGE_OF_OR_APPROXIMATELY_EQUAL_TO),
    "rq" => Token::Letter('â€™'),
    "rrangle" => Token::Delimiter(symbol::Z_NOTATION_RIGHT_BINDING_BRACKET),
    "rrbracket" => Token::Delimiter(symbol::MATHEMATICAL_RIGHT_WHITE_SQUARE_BRACKET),
    "rrparenthesis" => Token::Delimiter(symbol::Z_NOTATION_RIGHT_IMAGE_BRACKET),
    "rtimes" => Token::Relation(symbol::RIGHT_NORMAL_FACTOR_SEMIDIRECT_PRODUCT),
    "rupee" => Token::Letter('â‚¹'),
    "rvert" => Token::Delimiter(symbol::VERTICAL_LINE),
    "saturn" => Token::Letter(symbol::SATURN),
    "scriptscriptstyle" => Token::Style(Style::ScriptScriptStyle),
    "scriptstyle" => Token::Style(Style::ScriptStyle),
    "searrow" => Token::Relation(symbol::SOUTH_EAST_ARROW),
    "sec" => Token::Function("sec"),
    "setminus" => Token::Relation(symbol::SET_MINUS),
    "sgn" => Token::Function("sgn"),
    "sharp" => Token::Letter('â™¯'),
    "sigma" => Token::Letter('Ïƒ'),
    "sim" => Token::Relation(symbol::TILDE_OPERATOR),
    "simeq" => Token::Relation(symbol::ASYMPTOTICALLY_EQUAL_TO),
    "sin" => Token::Function("sin"),
    "sinh" => Token::Function("sinh"),
    "slashed" => Token::Slashed,
    "smallsetminus" => Token::Relation(symbol::SMALL_REVERSE_SOLIDUS),
    "smile" => Token::Relation(symbol::SMILE),
    "spadesuit" => Token::Letter(symbol::BLACK_SPADE_SUIT),
    "sphericalangle" => Token::Letter(symbol::SPHERICAL_ANGLE),
    "sqcap" => Token::Relation(symbol::SQUARE_CAP),
    "sqcup" => Token::Relation(symbol::SQUARE_CUP),
    "sqrt" => Token::Sqrt,
    "sqsubset" => Token::Relation(symbol::SQUARE_IMAGE_OF),
    "sqsubseteq" => Token::Relation(symbol::SQUARE_IMAGE_OF_OR_EQUAL_TO),
    "sqsupset" => Token::Relation(symbol::SQUARE_ORIGINAL_OF),
    "sqsupseteq" => Token::Relation(symbol::SQUARE_ORIGINAL_OF_OR_EQUAL_TO),
    "square" => Token::Letter('â–¡'),
    "ss" => Token::Letter('ÃŸ'),
    "stackrel" => Token::Overset,
    "star" => Token::Relation(symbol::STAR_OPERATOR),
    "stareq" => Token::Relation(symbol::STAR_EQUALS), // from "stix"
    "subset" => Token::Relation(symbol::SUBSET_OF),
    "subseteq" => Token::Relation(symbol::SUBSET_OF_OR_EQUAL_TO),
    "subsetneq" => Token::Relation(symbol::SUBSET_OF_WITH_NOT_EQUAL_TO),
    "subsetneqq" => Token::Relation(symbol::SUBSET_OF_ABOVE_NOT_EQUAL_TO),
    "succ" => Token::Relation(symbol::SUCCEEDS),
    "succapprox" => Token::Relation(symbol::SUCCEEDS_ABOVE_ALMOST_EQUAL_TO),
    "succcurlyeq" => Token::Relation(symbol::SUCCEEDS_OR_EQUAL_TO),
    "succeq" => Token::Relation(symbol::SUCCEEDS_ABOVE_SINGLE_LINE_EQUALS_SIGN),
    "succnapprox" => Token::Relation(symbol::SUCCEEDS_ABOVE_NOT_ALMOST_EQUAL_TO),
    "succneqq" => Token::Relation(symbol::SUCCEEDS_ABOVE_NOT_EQUAL_TO),
    "succnsim" => Token::Relation(symbol::SUCCEEDS_BUT_NOT_EQUIVALENT_TO),
    "succsim" => Token::Relation(symbol::SUCCEEDS_OR_EQUIVALENT_TO),
    "sum" => Token::BigOp(symbol::N_ARY_SUMMATION),
    "sumint" => Token::BigOp(symbol::SUMMATION_WITH_INTEGRAL),
    "sun" => Token::Letter('â˜¼'),
    "sup" => Token::Lim("sup"),
    "supset" => Token::Relation(symbol::SUPERSET_OF),
    "supseteq" => Token::Relation(symbol::SUPERSET_OF_OR_EQUAL_TO),
    "supsetneq" => Token::Relation(symbol::SUPERSET_OF_WITH_NOT_EQUAL_TO),
    "supsetneqq" => Token::Relation(symbol::SUPERSET_OF_ABOVE_NOT_EQUAL_TO),
    "swarrow" => Token::Relation(symbol::SOUTH_WEST_ARROW),
    "symbf" => Token::Transform(MathVariant::Transform(TextTransform::BoldItalic)),
    "tan" => Token::Function("tan"),
    "tanh" => Token::Function("tanh"),
    "tau" => Token::Letter('Ï„'),
    "tbinom" => Token::Binom(Some(FracAttr::DisplayStyleFalse)),
    "text" => Token::Text(None),
    "textbf" => Token::Text(Some(TextTransform::Bold)),
    "textit" => Token::Text(Some(TextTransform::Italic)),
    "textstyle" => Token::Style(Style::TextStyle),
    "texttt" => Token::Text(Some(TextTransform::Monospace)),
    "textyen" => Token::Letter('Â¥'),
    "tfrac" => Token::Frac(Some(FracAttr::DisplayStyleFalse)),
    "th" => Token::Letter('Ã¾'),
    "therefore" => Token::Relation(symbol::THEREFORE),
    "theta" => Token::Letter('Î¸'),
    "tilde" => Token::OverUnder(symbol::TILDE, true, Some(OpAttr::StretchyFalse)),
    "times" => Token::BinaryOp(symbol::MULTIPLICATION_SIGN),
    "to" => Token::Relation(symbol::RIGHTWARDS_ARROW),
    "top" => Token::Letter(symbol::DOWN_TACK),
    "triangle" => Token::Letter('â–³'),
    "triangledown" => Token::Letter(symbol::WHITE_DOWN_POINTING_TRIANGLE),
    "triangleleft" => Token::Letter(symbol::WHITE_LEFT_POINTING_TRIANGLE),
    "triangleq" => Token::Relation(symbol::DELTA_EQUAL_TO),
    "triangleright" => Token::Letter(symbol::WHITE_RIGHT_POINTING_TRIANGLE),
    "trprime" => Token::Relation(symbol::TRIPLE_PRIME),
    "twoheadleftarrow" => Token::Relation(symbol::LEFTWARDS_TWO_HEADED_ARROW),
    "twoheadrightarrow" => Token::Relation(symbol::RIGHTWARDS_TWO_HEADED_ARROW),
    "ulcorner" => Token::Letter(symbol::TOP_LEFT_CORNER),
    "underbrace" => Token::OverUnderBrace(symbol::BOTTOM_CURLY_BRACKET, false),
    "underbracket" => Token::OverUnderBrace(symbol::BOTTOM_SQUARE_BRACKET, false),
    "underline" => Token::OverUnder(symbol::LOW_LINE, false, None),
    "underparen" => Token::OverUnderBrace(symbol::BOTTOM_PARENTHESIS, false),
    "underset" => Token::Underset,
    "unlhd" => Token::Relation(symbol::NORMAL_SUBGROUP_OF_OR_EQUAL_TO),
    "unrhd" => Token::Relation(symbol::CONTAINS_AS_NORMAL_SUBGROUP_OR_EQUAL_TO),
    "uparrow" => Token::Delimiter(symbol::UPWARDS_ARROW),
    "updownarrow" => Token::Delimiter(symbol::UP_DOWN_ARROW),
    "upharpoonleft" => Token::Relation(symbol::UPWARDS_HARPOON_WITH_BARB_LEFTWARDS),
    "upharpoonright" => Token::Relation(symbol::UPWARDS_HARPOON_WITH_BARB_RIGHTWARDS),
    "uplus" => Token::Relation(symbol::MULTISET_UNION),
    "upsilon" => Token::Letter('Ï…'),
    "upuparrows" => Token::Relation(symbol::UPWARDS_PAIRED_ARROWS),
    "uranus" => Token::Letter(symbol::URANUS),
    "urcorner" => Token::Letter(symbol::TOP_RIGHT_CORNER),
    "VDash" => Token::Relation(symbol::DOUBLE_VERTICAL_BAR_DOUBLE_RIGHT_TURNSTILE),
    "vDash" => Token::Relation(symbol::TRUE),
    "varDelta" => Token::Letter('Î”'), // italicized
    "varGamma" => Token::Letter('Î“'), // italicized
    "varLambda" => Token::Letter('Î›'), // italicized
    "varOmega" => Token::Letter('Î©'), // italicized
    "varPhi" => Token::Letter('Î¦'), // italicized
    "varPi" => Token::Letter('Î '), // italicized
    "varSigma" => Token::Letter('Î£'), // italicized
    "varTheta" => Token::Letter('Î˜'), // italicized
    "varUpsilon" => Token::Letter('Ï’'), // italicized
    "varXi" => Token::Letter('Îž'), // italicized
    "varepsilon" => Token::Letter('Îµ'),
    "varkappa" => Token::Letter('Ï°'),
    "varnothing" => Token::Letter(symbol::EMPTY_SET),
    "varointclockwise" => Token::Integral(symbol::CLOCKWISE_CONTOUR_INTEGRAL),
    "varphi" => Token::Letter('Ï†'),
    "varpi" => Token::Letter('Ï–'),
    "varrho" => Token::Letter('Ï±'),
    "varsigma" => Token::Letter('Ï‚'),
    "vartheta" => Token::Letter('Ï‘'),
    "vartriangle" => Token::Letter(symbol::WHITE_UP_POINTING_TRIANGLE),
    "vdash" => Token::Relation(symbol::RIGHT_TACK),
    "vdots" => Token::Relation(symbol::VERTICAL_ELLIPSIS),
    "vec" => Token::OverUnder(symbol::RIGHTWARDS_ARROW.as_op(), true, Some(OpAttr::StretchyFalse)),
    "vee" => Token::Relation(symbol::LOGICAL_OR),
    "veebar" => Token::Relation(symbol::XOR),
    "veeeq" => Token::Relation(symbol::EQUIANGULAR_TO), // from "stix"
    "venus" => Token::Letter(symbol::FEMALE_SIGN),
    "vert" => Token::Delimiter(symbol::VERTICAL_LINE),
    "wedge" => Token::Relation(symbol::LOGICAL_AND),
    "wedgeq" => Token::Relation(symbol::ESTIMATES), // from "stix"
    "widehat" => Token::OverUnder(symbol::CIRCUMFLEX_ACCENT, true, None),
    "widetilde" => Token::OverUnder(symbol::TILDE, true, None),
    "wp" => Token::Function("â„˜"),
    "wr" => Token::Relation(symbol::WREATH_PRODUCT),
    "xi" => Token::Letter('Î¾'),
    "xleftarrow" => Token::CustomCmd(1, &predefined::XLEFTARROW),
    "xrightarrow" => Token::CustomCmd(1, &predefined::XRIGHTARROW),
    "zeta" => Token::Letter('Î¶'),
    "{" => Token::Delimiter(symbol::LEFT_CURLY_BRACKET),
    "|" => Token::Delimiter(symbol::DOUBLE_VERTICAL_LINE),
    "}" => Token::Delimiter(symbol::RIGHT_CURLY_BRACKET),
};

pub fn get_command(command: &str) -> Token<'_> {
    match COMMANDS.get(command) {
        Some(token) => *token,
        None => Token::UnknownCommand(command),
    }
}

pub fn get_negated_op(op: Rel) -> Option<Rel> {
    match op {
        symbol::ALMOST_EQUAL_TO => Some(symbol::NOT_ALMOST_EQUAL_TO),
        symbol::APPROXIMATELY_EQUAL_TO => Some(symbol::NOT_ASYMPTOTICALLY_EQUAL_TO),
        symbol::DOUBLE_VERTICAL_BAR_DOUBLE_RIGHT_TURNSTILE => {
            Some(symbol::NEGATED_DOUBLE_VERTICAL_BAR_DOUBLE_RIGHT_TURNSTILE)
        }
        symbol::ELEMENT_OF => Some(symbol::NOT_AN_ELEMENT_OF),
        symbol::FORCES => Some(symbol::DOES_NOT_FORCE),
        symbol::GREATER_THAN_OVER_EQUAL_TO => Some(symbol::NEITHER_GREATER_THAN_NOR_EQUAL_TO),
        symbol::LESS_THAN_OR_EQUAL_TO => Some(symbol::NEITHER_LESS_THAN_NOR_EQUAL_TO),
        symbol::PRECEDES => Some(symbol::DOES_NOT_PRECEDE),
        symbol::RIGHT_TACK => Some(symbol::DOES_NOT_PROVE),
        symbol::SUBSET_OF => Some(symbol::NOT_A_SUBSET_OF),
        symbol::SUBSET_OF_OR_EQUAL_TO => Some(symbol::NEITHER_A_SUBSET_OF_NOR_EQUAL_TO),
        symbol::SUCCEEDS => Some(symbol::DOES_NOT_SUCCEED),
        symbol::SUPERSET_OF => Some(symbol::NOT_A_SUPERSET_OF),
        symbol::SUPERSET_OF_OR_EQUAL_TO => Some(symbol::NEITHER_A_SUPERSET_OF_NOR_EQUAL_TO),
        symbol::TRUE => Some(symbol::NOT_TRUE),
        _ => None,
    }
}
